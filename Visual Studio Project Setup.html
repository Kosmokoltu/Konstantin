<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OTUS C# - Visual Studio Setup</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 32px;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 16px;
            opacity: 0.95;
        }
        
        .content {
            padding: 40px;
        }
        
        .section {
            margin-bottom: 40px;
        }
        
        .section h2 {
            color: #667eea;
            border-bottom: 3px solid #667eea;
            padding-bottom: 12px;
            margin-bottom: 20px;
            font-size: 22px;
        }
        
        .section h3 {
            color: #333;
            margin-top: 20px;
            margin-bottom: 12px;
            font-size: 16px;
        }
        
        .code-block {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 15px;
            border-radius: 6px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            line-height: 1.5;
            margin: 15px 0;
            border-left: 4px solid #667eea;
        }
        
        .file-tree {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            overflow-x: auto;
            margin: 15px 0;
        }
        
        .file-tree .folder {
            color: #ce9178;
        }
        
        .file-tree .file {
            color: #d4d4d4;
        }
        
        .file-tree .csproj {
            color: #4ec9b0;
        }
        
        .instructions {
            background: #e3f2fd;
            border-left: 4px solid #2196F3;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }
        
        .instructions strong {
            color: #1976D2;
        }
        
        ol, ul {
            margin-left: 20px;
            line-height: 1.8;
        }
        
        li {
            margin-bottom: 8px;
        }
        
        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background: #667eea;
            color: white;
        }
        
        .btn-primary:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }
        
        .btn-secondary {
            background: #f5f5f5;
            color: #333;
            border: 2px solid #ddd;
        }
        
        .btn-secondary:hover {
            background: #efefef;
            transform: translateY(-2px);
        }
        
        .checklist {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 6px;
            margin: 15px 0;
        }
        
        .checklist ul {
            list-style: none;
            margin-left: 0;
        }
        
        .checklist li {
            padding: 8px 0;
            padding-left: 30px;
            position: relative;
        }
        
        .checklist li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: #4caf50;
            font-weight: bold;
            font-size: 18px;
        }
        
        .copy-section {
            background: #f9f9f9;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
        }
        
        textarea {
            width: 100%;
            height: 250px;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            resize: vertical;
            line-height: 1.5;
        }
        
        .copy-btn {
            background: #667eea;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            margin-top: 10px;
            transition: all 0.3s ease;
        }
        
        .copy-btn:hover {
            background: #5568d3;
            transform: translateY(-2px);
        }
        
        .alert {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }
        
        .success {
            background: #d4edda;
            border-left: 4px solid #28a745;
            color: #155724;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìÅ OTUS C# Basic - Visual Studio Setup</h1>
            <p>–ì–æ—Ç–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è –¥–æ–º–∞—à–Ω–µ–≥–æ –∑–∞–¥–∞–Ω–∏—è</p>
        </div>
        
        <div class="content">
            <!-- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ -->
            <div class="section">
                <h2>üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞</h2>
                <div class="file-tree">
OTUS-CSharp-Basic-Homework/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îî‚îÄ‚îÄ ToDoApp/
‚îÇ       ‚îú‚îÄ‚îÄ <span class="csproj">ToDoApp.csproj</span>
‚îÇ       ‚îú‚îÄ‚îÄ <span class="file">Program.cs</span>
‚îÇ       ‚îú‚îÄ‚îÄ <span class="folder">Exceptions/</span>
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ <span class="file">TaskCountLimitException.cs</span>
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ <span class="file">TaskLengthLimitException.cs</span>
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ <span class="file">DuplicateTaskException.cs</span>
‚îÇ       ‚îî‚îÄ‚îÄ <span class="folder">Models/</span>
‚îÇ           ‚îú‚îÄ‚îÄ <span class="file">ToDoItemState.cs</span>
‚îÇ           ‚îú‚îÄ‚îÄ <span class="file">ToDoUser.cs</span>
‚îÇ           ‚îî‚îÄ‚îÄ <span class="file">ToDoItem.cs</span>
‚îú‚îÄ‚îÄ <span class="file">.gitignore</span>
‚îî‚îÄ‚îÄ <span class="file">README.md</span>
                </div>
            </div>
            
            <!-- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è Visual Studio -->
            <div class="section">
                <h2>üöÄ –°–ø–æ—Å–æ–± 1: –°–æ–∑–¥–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Visual Studio (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)</h2>
                <ol>
                    <li>–û—Ç–∫—Ä–æ–π <strong>Visual Studio 2022</strong></li>
                    <li>–ù–∞–∂–º–∏ <strong>"Create a new project"</strong></li>
                    <li>–í—ã–±–µ—Ä–∏ <strong>"Console App"</strong> (C# .NET 6.0 –∏–ª–∏ –≤—ã—à–µ)</li>
                    <li>–ù–∞–∂–º–∏ <strong>"Next"</strong></li>
                    <li>–í–≤–µ–¥–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞: <strong>ToDoApp</strong></li>
                    <li>–í—ã–±–µ—Ä–∏ –ø—É—Ç—å: –ª—é–±–∞—è –ø–∞–ø–∫–∞ (Visual Studio —Å–æ–∑–¥–∞—Å—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)</li>
                    <li>–ù–∞–∂–º–∏ <strong>"Create"</strong></li>
                    <li>–ö–æ–≥–¥–∞ –ø—Ä–æ–µ–∫—Ç –æ—Ç–∫—Ä–æ–µ—Ç—Å—è, —Å–æ–∑–¥–∞–π –ø–∞–ø–∫–∏:
                        <ul>
                            <li>–ö–ª–∏–∫–Ω–∏ –ø—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π –Ω–∞ –ø—Ä–æ–µ–∫—Ç ‚Üí <strong>Add</strong> ‚Üí <strong>New Folder</strong> ‚Üí <strong>Models</strong></li>
                            <li>–ü–æ–≤—Ç–æ—Ä–∏ –¥–ª—è –ø–∞–ø–∫–∏ <strong>Exceptions</strong></li>
                        </ul>
                    </li>
                </ol>
            </div>
            
            <!-- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ -->
            <div class="section">
                <h2>üñ•Ô∏è –°–ø–æ—Å–æ–± 2: –°–æ–∑–¥–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É</h2>
                <div class="code-block">
# –°–æ–∑–¥–∞–π –∫–æ—Ä–Ω–µ–≤—É—é –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
mkdir OTUS-CSharp-Basic-Homework
cd OTUS-CSharp-Basic-Homework

# –°–æ–∑–¥–∞–π –ø–∞–ø–∫—É src
mkdir src
cd src

# –°–æ–∑–¥–∞–π –Ω–æ–≤—ã–π Console –ø—Ä–æ–µ–∫—Ç
dotnet new console -n ToDoApp
cd ToDoApp

# –°–æ–∑–¥–∞–π –ø–∞–ø–∫–∏ –¥–ª—è –∫–ª–∞—Å—Å–æ–≤
mkdir Models
mkdir Exceptions

# –û—Ç–∫—Ä–æ–π –≤ Visual Studio (–∏–∑ –ø–∞–ø–∫–∏ src/ToDoApp)
start .
# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é –æ—Ç–∫—Ä–∏ –ø–∞–ø–∫—É –≤ Visual Studio
                </div>
            </div>
            
            <!-- ToDoApp.csproj -->
            <div class="section">
                <h2>üìù –§–∞–π–ª ToDoApp.csproj</h2>
                <p>–°–∫–æ–ø–∏—Ä—É–π —ç—Ç–æ –≤ —Ñ–∞–π–ª <strong>src/ToDoApp/ToDoApp.csproj</strong>:</p>
                <div class="copy-section">
                    <div class="code-block">
&lt;Project Sdk="Microsoft.NET.Sdk"&gt;

  &lt;PropertyGroup&gt;
    &lt;OutputType&gt;Exe&lt;/OutputType&gt;
    &lt;TargetFramework&gt;net6.0&lt;/TargetFramework&gt;
    &lt;LangVersion&gt;latest&lt;/LangVersion&gt;
    &lt;Nullable&gt;enable&lt;/Nullable&gt;
  &lt;/PropertyGroup&gt;

&lt;/Project&gt;
                    </div>
                    <button class="copy-btn" onclick="copyCode('.csproj-code')">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥</button>
                </div>
            </div>
            
            <!-- –§–∞–π–ª—ã –∫–ª–∞—Å—Å–æ–≤ -->
            <div class="section">
                <h2>üì¶ –§–∞–π–ª—ã –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è</h2>
                
                <h3>1. Exceptions/TaskCountLimitException.cs</h3>
                <div class="code-block">
public class TaskCountLimitException : Exception
{
    public TaskCountLimitException(int taskCountLimit)
        : base($"–ü—Ä–µ–≤—ã—à–µ–Ω–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–¥–∞—á —Ä–∞–≤–Ω–æ–µ {taskCountLimit}") { }
}
                </div>
                
                <h3>2. Exceptions/TaskLengthLimitException.cs</h3>
                <div class="code-block">
public class TaskLengthLimitException : Exception
{
    public TaskLengthLimitException(int taskLength, int taskLengthLimit)
        : base($"–î–ª–∏–Ω–∞ –∑–∞–¥–∞—á–∏ '{taskLength}' –ø—Ä–µ–≤—ã—à–∞–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –¥–æ–ø—É—Å—Ç–∏–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ {taskLengthLimit}") { }
}
                </div>
                
                <h3>3. Exceptions/DuplicateTaskException.cs</h3>
                <div class="code-block">
public class DuplicateTaskException : Exception
{
    public DuplicateTaskException(string task)
        : base($"–ó–∞–¥–∞—á–∞ '{task}' —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç") { }
}
                </div>
                
                <h3>4. Models/ToDoItemState.cs</h3>
                <div class="code-block">
public enum ToDoItemState
{
    Active,
    Completed
}
                </div>
                
                <h3>5. Models/ToDoUser.cs</h3>
                <div class="code-block">
public class ToDoUser
{
    public Guid UserId { get; }
    public string TelegramUserName { get; }
    public DateTime RegisteredAt { get; }

    public ToDoUser(string telegramUserName)
    {
        if (string.IsNullOrWhiteSpace(telegramUserName))
            throw new ArgumentException("–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—É—Å—Ç—ã–º.");

        UserId = Guid.NewGuid();
        TelegramUserName = telegramUserName;
        RegisteredAt = DateTime.UtcNow;
    }
}
                </div>
                
                <h3>6. Models/ToDoItem.cs</h3>
                <div class="code-block">
public class ToDoItem
{
    public Guid Id { get; }
    public ToDoUser User { get; }
    public string Name { get; }
    public DateTime CreatedAt { get; }
    public ToDoItemState State { get; private set; }
    public DateTime? StateChangedAt { get; private set; }

    public ToDoItem(ToDoUser user, string name)
    {
        if (user == null)
            throw new ArgumentNullException(nameof(user));
        if (string.IsNullOrWhiteSpace(name))
            throw new ArgumentException("–ò–º—è –∑–∞–¥–∞—á–∏ –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—É—Å—Ç—ã–º.");

        Id = Guid.NewGuid();
        User = user;
        Name = name;
        CreatedAt = DateTime.UtcNow;
        State = ToDoItemState.Active;
        StateChangedAt = null;
    }

    public void Complete()
    {
        if (State == ToDoItemState.Completed)
            return;

        State = ToDoItemState.Completed;
        StateChangedAt = DateTime.UtcNow;
    }
}
                </div>
            </div>
            
            <!-- Program.cs -->
            <div class="section">
                <h2>‚öôÔ∏è Program.cs (–û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª)</h2>
                <p>–°–∫–æ–ø–∏—Ä—É–π –ø–æ–ª–Ω—ã–π –∫–æ–¥ –Ω–∏–∂–µ –≤ —Ñ–∞–π–ª <strong>src/ToDoApp/Program.cs</strong>:</p>
                <div class="copy-section">
                    <textarea id="programCs">using System;
using System.Collections.Generic;
using System.Linq;

// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
public class TaskCountLimitException : Exception
{
    public TaskCountLimitException(int taskCountLimit)
        : base($"–ü—Ä–µ–≤—ã—à–µ–Ω–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–¥–∞—á —Ä–∞–≤–Ω–æ–µ {taskCountLimit}") { }
}

public class TaskLengthLimitException : Exception
{
    public TaskLengthLimitException(int taskLength, int taskLengthLimit)
        : base($"–î–ª–∏–Ω–∞ –∑–∞–¥–∞—á–∏ '{taskLength}' –ø—Ä–µ–≤—ã—à–∞–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –¥–æ–ø—É—Å—Ç–∏–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ {taskLengthLimit}") { }
}

public class DuplicateTaskException : Exception
{
    public DuplicateTaskException(string task)
        : base($"–ó–∞–¥–∞—á–∞ '{task}' —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç") { }
}

// –ú–æ–¥–µ–ª–∏
public enum ToDoItemState
{
    Active,
    Completed
}

public class ToDoUser
{
    public Guid UserId { get; }
    public string TelegramUserName { get; }
    public DateTime RegisteredAt { get; }

    public ToDoUser(string telegramUserName)
    {
        if (string.IsNullOrWhiteSpace(telegramUserName))
            throw new ArgumentException("–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—É—Å—Ç—ã–º.");

        UserId = Guid.NewGuid();
        TelegramUserName = telegramUserName;
        RegisteredAt = DateTime.UtcNow;
    }
}

public class ToDoItem
{
    public Guid Id { get; }
    public ToDoUser User { get; }
    public string Name { get; }
    public DateTime CreatedAt { get; }
    public ToDoItemState State { get; private set; }
    public DateTime? StateChangedAt { get; private set; }

    public ToDoItem(ToDoUser user, string name)
    {
        if (user == null)
            throw new ArgumentNullException(nameof(user));

        if (string.IsNullOrWhiteSpace(name))
            throw new ArgumentException("–ò–º—è –∑–∞–¥–∞—á–∏ –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—É—Å—Ç—ã–º.");

        Id = Guid.NewGuid();
        User = user;
        Name = name;
        CreatedAt = DateTime.UtcNow;
        State = ToDoItemState.Active;
        StateChangedAt = null;
    }

    public void Complete()
    {
        if (State == ToDoItemState.Completed)
            return;

        State = ToDoItemState.Completed;
        StateChangedAt = DateTime.UtcNow;
    }
}

class Program
{
    static void Main(string[] args)
    {
        try
        {
            Console.Write("–í–≤–µ–¥–∏—Ç–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –¥–æ–ø—É—Å—Ç–∏–º–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–¥–∞—á (1-100): ");
            int taskLimit = ParseAndValidateInt(Console.ReadLine(), 1, 100);

            Console.Write("–í–≤–µ–¥–∏—Ç–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –¥–æ–ø—É—Å—Ç–∏–º—É—é –¥–ª–∏–Ω—É –∑–∞–¥–∞—á–∏ (1-100): ");
            int taskLengthLimit = ParseAndValidateInt(Console.ReadLine(), 1, 100);

            Run(taskLimit, taskLengthLimit);
        }
        catch (TaskCountLimitException ex)
        {
            Console.WriteLine(ex.Message);
        }
        catch (TaskLengthLimitException ex)
        {
            Console.WriteLine(ex.Message);
        }
        catch (DuplicateTaskException ex)
        {
            Console.WriteLine(ex.Message);
        }
        catch (ArgumentException ex)
        {
            Console.WriteLine(ex.Message);
        }
        catch (Exception ex)
        {
            Console.WriteLine("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω–∞—è –æ—à–∏–±–∫–∞:");
            Console.WriteLine($"Type: {ex.GetType().FullName}");
            Console.WriteLine($"Message: {ex.Message}");
            Console.WriteLine($"StackTrace: {ex.StackTrace}");
            Console.WriteLine($"InnerException: {ex.InnerException}");
        }
    }

    static void Run(int taskLimit, int taskLengthLimit)
    {
        ToDoUser? user = null;
        bool isRunning = true;
        string version = "1.0";
        string creationDate = "19.11.2025";
        List<ToDoItem> tasks = new List<ToDoItem>();

        Console.WriteLine("–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –º–µ–Ω—é —Ö–æ–∫–∫–µ–π–Ω–æ–≥–æ –æ–¥–µ–≤–∞–ª–∫–∏–Ω–∞!");
        Console.WriteLine("–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã: /start, /help, /info, /echo, /addtask, /showtasks, /showalltasks, /removetask, /completetask, /exit");

        while (isRunning)
        {
            Console.Write("> ");
            var input = Console.ReadLine();

            if (input == null)
            {
                Console.WriteLine("–ü—É—Å—Ç–æ–π –≤–≤–æ–¥. –í–≤–µ–¥–∏—Ç–µ /help –¥–ª—è —Å–ø–∏—Å–∫–∞ –∫–æ–º–∞–Ω–¥.");
                continue;
            }

            if (input.StartsWith("/start"))
                HandleStart(ref user);
            else if (input.StartsWith("/help"))
                HandleHelp();
            else if (input.StartsWith("/info"))
                HandleInfo(version, creationDate);
            else if (input.StartsWith("/echo"))
                HandleEcho(input, user);
            else if (input.StartsWith("/addtask"))
            {
                try
                {
                    HandleAddTask(tasks, taskLimit, taskLengthLimit, user);
                }
                catch (TaskCountLimitException ex) { Console.WriteLine(ex.Message); }
                catch (TaskLengthLimitException ex) { Console.WriteLine(ex.Message); }
                catch (DuplicateTaskException ex) { Console.WriteLine(ex.Message); }
                catch (ArgumentException ex) { Console.WriteLine(ex.Message); }
            }
            else if (input.StartsWith("/showtasks"))
                HandleShowTasks(tasks);
            else if (input.StartsWith("/showalltasks"))
                HandleShowAllTasks(tasks);
            else if (input.StartsWith("/removetask"))
            {
                try { HandleRemoveTask(tasks); }
                catch (ArgumentException ex) { Console.WriteLine(ex.Message); }
            }
            else if (input.StartsWith("/completetask"))
                HandleCompleteTask(input, tasks);
            else if (input.StartsWith("/exit"))
            {
                Console.WriteLine("–ü—Ä–æ–≥—Ä–∞–º–º–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞.");
                isRunning = false;
            }
            else
                Console.WriteLine("–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞. –í–≤–µ–¥–∏—Ç–µ /help –¥–ª—è —Å–ø–∏—Å–∫–∞ –∫–æ–º–∞–Ω–¥.");
        }
    }

    static int ParseAndValidateInt(string? str, int min, int max)
    {
        if (!int.TryParse(str, out int value))
            throw new ArgumentException("–û–∂–∏–¥–∞–µ—Ç—Å—è —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ.");

        if (value < min || value > max)
            throw new ArgumentException($"–ß–∏—Å–ª–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ –æ—Ç {min} –¥–æ {max}.");

        return value;
    }

    static void ValidateString(string? str)
    {
        if (string.IsNullOrWhiteSpace(str))
            throw new ArgumentException("–°—Ç—Ä–æ–∫–∞ –Ω–µ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø—É—Å—Ç–æ–π –∏ —Å–æ—Å—Ç–æ—è—Ç—å —Ç–æ–ª—å–∫–æ –∏–∑ –ø—Ä–æ–±–µ–ª–æ–≤.");
    }

    static void HandleStart(ref ToDoUser? user)
    {
        Console.Write("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —Å–≤–æ—ë –∏–º—è: ");
        string? name = Console.ReadLine();
        ValidateString(name);
        user = new ToDoUser(name!);
        Console.WriteLine($"–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, {user.TelegramUserName}! –¢–µ–ø–µ—Ä—å –¥–æ—Å—Ç—É–ø–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ /echo.");
    }

    static void HandleHelp()
    {
        Console.WriteLine("–°–ø—Ä–∞–≤–∫–∞:");
        Console.WriteLine("/start - –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É –∏ –≤–≤–µ—Å—Ç–∏ –∏–º—è");
        Console.WriteLine("/help - –ø–æ–∫–∞–∑–∞—Ç—å —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ");
        Console.WriteLine("/info - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–≥—Ä–∞–º–º–µ");
        Console.WriteLine("/echo <—Ç–µ–∫—Å—Ç> - –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –≤–≤–µ–¥—ë–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç (–¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ—Å–ª–µ /start)");
        Console.WriteLine("/addtask - –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É –≤ —Å–ø–∏—Å–æ–∫");
        Console.WriteLine("/showtasks - –ø–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏");
        Console.WriteLine("/showalltasks - –ø–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∑–∞–¥–∞—á–∏ —Å –ª—é–±—ã–º —Å—Ç–∞—Ç—É—Å–æ–º");
        Console.WriteLine("/removetask - —É–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É –ø–æ –Ω–æ–º–µ—Ä—É");
        Console.WriteLine("/completetask <Id> - –æ—Ç–º–µ—Ç–∏—Ç—å –∑–∞–¥–∞—á—É –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—É—é –ø–æ Id");
        Console.WriteLine("/exit - –≤—ã–π—Ç–∏ –∏–∑ –ø—Ä–æ–≥—Ä–∞–º–º—ã");
    }

    static void HandleInfo(string version, string creationDate)
    {
        Console.WriteLine($"–í–µ—Ä—Å–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã: {version}");
        Console.WriteLine($"–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è: {creationDate}");
    }

    static void HandleEcho(string input, ToDoUser? user)
    {
        if (user != null)
        {
            string message = input.Length > 6 ? input.Substring(6) : "";
            Console.WriteLine($"{user.TelegramUserName}, –≤–∞—à —Ç–µ–∫—Å—Ç: {message}");
        }
        else
            Console.WriteLine("–°–Ω–∞—á–∞–ª–∞ –≤–≤–µ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É /start –∏ –∏–º—è.");
    }

    static void HandleAddTask(List<ToDoItem> tasks, int taskLimit, int taskLengthLimit, ToDoUser? user)
    {
        if (user == null)
        {
            Console.WriteLine("–°–Ω–∞—á–∞–ª–∞ –≤–≤–µ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É /start –∏ –∏–º—è.");
            return;
        }

        Console.Write("–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏: ");
        string? taskName = Console.ReadLine();

        ValidateString(taskName);

        if (tasks.Count >= taskLimit)
            throw new TaskCountLimitException(taskLimit);

        if (taskName!.Length > taskLengthLimit)
            throw new TaskLengthLimitException(taskName.Length, taskLengthLimit);

        if (tasks.Exists(t => t.Name == taskName && t.User.UserId == user.UserId))
            throw new DuplicateTaskException(taskName);

        var item = new ToDoItem(user, taskName);
        tasks.Add(item);
        Console.WriteLine($"–ó–∞–¥–∞—á–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞. Id: {item.Id}");
    }

    static void HandleShowTasks(List<ToDoItem> tasks)
    {
        var activeTasks = tasks.Where(t => t.State == ToDoItemState.Active).ToList();

        if (activeTasks.Count == 0)
            Console.WriteLine("–°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á –ø—É—Å—Ç.");
        else
        {
            Console.WriteLine("–°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á:");
            for (int i = 0; i < activeTasks.Count; i++)
            {
                var t = activeTasks[i];
                Console.WriteLine($"{i + 1}. {t.Name} - {t.CreatedAt:dd.MM.yyyy HH:mm:ss} - {t.Id}");
            }
        }
    }

    static void HandleShowAllTasks(List<ToDoItem> tasks)
    {
        if (tasks.Count == 0)
            Console.WriteLine("–°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –ø—É—Å—Ç.");
        else
        {
            Console.WriteLine("–í—Å–µ –∑–∞–¥–∞—á–∏:");
            for (int i = 0; i < tasks.Count; i++)
            {
                var t = tasks[i];
                Console.WriteLine($"{i + 1}. ({t.State}) {t.Name} - {t.CreatedAt:dd.MM.yyyy HH:mm:ss} - {t.Id}");
            }
        }
    }

    static void HandleRemoveTask(List<ToDoItem> tasks)
    {
        if (tasks.Count == 0)
        {
            Console.WriteLine("–°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –ø—É—Å—Ç, —É–¥–∞–ª—è—Ç—å –Ω–µ—á–µ–≥–æ.");
            return;
        }

        Console.WriteLine("–¢–µ–∫—É—â–∏–µ –∑–∞–¥–∞—á–∏:");
        for (int i = 0; i < tasks.Count; i++)
        {
            var t = tasks[i];
            Console.WriteLine($"{i + 1}. ({t.State}) {t.Name} - {t.CreatedAt:dd.MM.yyyy HH:mm:ss} - {t.Id}");
        }

        Console.Write("–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∑–∞–¥–∞—á–∏ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è: ");
        string? indexInput = Console.ReadLine();
        int index = ParseAndValidateInt(indexInput, 1, tasks.Count);

        tasks.RemoveAt(index - 1);
        Console.WriteLine("–ó–∞–¥–∞—á–∞ —É–¥–∞–ª–µ–Ω–∞.");
    }

    static void HandleCompleteTask(string input, List<ToDoItem> tasks)
    {
        var parts = input.Split(' ', StringSplitOptions.RemoveEmptyEntries);

        if (parts.Length < 2)
        {
            Console.WriteLine("–ù—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å Id –∑–∞–¥–∞—á–∏. –ü—Ä–∏–º–µ—Ä: /completetask 73c7940a-ca8c-4327-8a15-9119bffd1d5e");
            return;
        }

        if (!Guid.TryParse(parts[1], out Guid id))
        {
            Console.WriteLine("–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç Id.");
            return;
        }

        var task = tasks.FirstOrDefault(t => t.Id == id);
        if (task == null)
        {
            Console.WriteLine("–ó–∞–¥–∞—á–∞ —Å —Ç–∞–∫–∏–º Id –Ω–µ –Ω–∞–π–¥–µ–Ω–∞.");
            return;
        }

        task.Complete();
        Console.WriteLine("–ó–∞–¥–∞—á–∞ –æ—Ç–º–µ—á–µ–Ω–∞ –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–∞—è.");
    }
}
                    </textarea>
                    <button class="copy-btn" onclick="copyText('programCs')">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å Program.cs</button>
                </div>
            </div>
            
            <!-- .gitignore -->
            <div class="section">
                <h2>.gitignore</h2>
                <p>–°–∫–æ–ø–∏—Ä—É–π —ç—Ç–æ –≤ —Ñ–∞–π–ª <strong>.gitignore</strong> –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:</p>
                <div class="copy-section">
                    <textarea id="gitignore">## Ignore Visual Studio temporary files, build results
bin/
obj/
.vs/

## User-specific files
*.user
*.suo
*.cache
*.csproj.user

## VS Code
.vscode/

## macOS
.DS_Store

## Rider
.idea/
*.sln.iml
                    </textarea>
                    <button class="copy-btn" onclick="copyText('gitignore')">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å .gitignore</button>
                </div>
            </div>
            
            <!-- README.md -->
            <div class="section">
                <h2>README.md</h2>
                <p>–°–∫–æ–ø–∏—Ä—É–π —ç—Ç–æ –≤ —Ñ–∞–π–ª <strong>README.md</strong> –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:</p>
                <div class="copy-section">
                    <textarea id="readme"># OTUS C# Basic - ToDo List Application

Console application for task management with user support.

## ‚ú® Features
- ‚úÖ User registration (ToDoUser class with Guid, TelegramUserName, RegisteredAt)
- ‚úÖ Create, complete, and delete tasks (ToDoItem class with state tracking)
- ‚úÖ Task filtering by state (Active/Completed)
- ‚úÖ Task limit validation (1-100 configurable)
- ‚úÖ Task length validation (1-100 characters configurable)
- ‚úÖ Duplicate task prevention per user
- ‚úÖ Telegram bot template support

## üìÅ Project Structure
src/
‚îî‚îÄ‚îÄ ToDoApp/
    ‚îú‚îÄ‚îÄ Program.cs
    ‚îú‚îÄ‚îÄ Models/
    ‚îÇ   ‚îú‚îÄ‚îÄ ToDoUser.cs
    ‚îÇ   ‚îú‚îÄ‚îÄ ToDoItem.cs
    ‚îÇ   ‚îî‚îÄ‚îÄ ToDoItemState.cs
    ‚îî‚îÄ‚îÄ Exceptions/
        ‚îú‚îÄ‚îÄ TaskCountLimitException.cs
        ‚îú‚îÄ‚îÄ TaskLengthLimitException.cs
        ‚îî‚îÄ‚îÄ DuplicateTaskException.cs

## üìã Requirements
- .NET 6.0 or higher
- Visual Studio 2022 or Visual Studio Code
- C# 10+

## üöÄ Build & Run
cd src/ToDoApp
dotnet build
dotnet run

## üíª Commands

| Command | Description | Example |
|---------|-------------|---------|
| `/start` | Register user with username | `/start` |
| `/help` | Show all available commands | `/help` |
| `/info` | Show app version and date | `/info` |
| `/echo <text>` | Echo text (requires /start) | `/echo Hello` |
| `/addtask` | Add new task | `/addtask` |
| `/showtasks` | Show only active tasks | `/showtasks` |
| `/showalltasks` | Show all tasks with state | `/showalltasks` |
| `/removetask` | Remove task by number | `/removetask` |
| `/completetask <Id>` | Mark task as completed | `/completetask 123e4567-e89b-12d3-a456-426614174000` |
| `/exit` | Exit application | `/exit` |

## ‚úîÔ∏è Validation Rules
- **Maximum tasks**: Set on startup (1-100)
- **Maximum task length**: Set on startup (1-100 characters)
- **Duplicate tasks**: Not allowed per user
- **Task names**: Cannot be empty or whitespace only
- **User names**: Cannot be empty or whitespace only

## üìñ Example Usage
> /start
–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —Å–≤–æ—ë –∏–º—è: John
–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, John! –¢–µ–ø–µ—Ä—å –¥–æ—Å—Ç—É–ø–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ /echo.

> /addtask
–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏: Buy groceries
–ó–∞–¥–∞—á–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞. Id: 17056344-0e03-4a21-b0dd-f0d30a5abf49

> /showtasks
–°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á:
1. Buy groceries - 15.01.2026 21:40:30 - 17056344-0e03-4a21-b0dd-f0d30a5abf49

> /completetask 17056344-0e03-4a21-b0dd-f0d30a5abf49
–ó–∞–¥–∞—á–∞ –æ—Ç–º–µ—á–µ–Ω–∞ –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–∞—è.

> /showalltasks
–í—Å–µ –∑–∞–¥–∞—á–∏:
1. (Completed) Buy groceries - 15.01.2026 21:40:30 - 17056344-0e03-4a21-b0dd-f0d30a5abf49

## üë§ Author
Your Name

## üéì Course
OTUS C# Developer. Basic

## üìù License
Educational Project
                    </textarea>
                    <button class="copy-btn" onclick="copyText('readme')">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å README.md</button>
                </div>
            </div>
            
            <!-- –ß–µ–∫-–ª–∏—Å—Ç -->
            <div class="section">
                <h2>‚úÖ –§–∏–Ω–∞–ª—å–Ω—ã–π —á–µ–∫-–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π</h2>
                <div class="checklist">
                    <ul>
                        <li>–°–æ–∑–¥–∞–Ω—ã –≤—Å–µ –ø–∞–ø–∫–∏ (Models, Exceptions)</li>
                        <li>–°–æ–∑–¥–∞–Ω—ã –≤—Å–µ 6 —Ñ–∞–π–ª–æ–≤ –∫–ª–∞—Å—Å–æ–≤</li>
                        <li>Program.cs —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–Ω—ã–π –∫–æ–¥</li>
                        <li>ToDoApp.csproj —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π</li>
                        <li>–ü—Ä–æ–µ–∫—Ç –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è: <code>dotnet build</code></li>
                        <li>–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è: <code>dotnet run</code></li>
                        <li>–í—Å–µ –∫–æ–º–∞–Ω–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ</li>
                        <li>–°–æ–∑–¥–∞–Ω .gitignore —Ñ–∞–π–ª</li>
                        <li>–°–æ–∑–¥–∞–Ω README.md</li>
                        <li>–ö–æ–¥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ GitHub –∏–ª–∏ –∫–∞–∫ –∞—Ä—Ö–∏–≤</li>
                    </ul>
                </div>
            </div>
            
            <!-- –§–∏–Ω–∞–ª—å–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è -->
            <div class="section">
                <h2>üì§ –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É</h2>
                <div class="instructions">
                    <strong>–í–∞—Ä–∏–∞–Ω—Ç 1: GitHub (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)</strong><br>
                    –ó–∞–≥—Ä—É–∑–∏ –ø—Ä–æ–µ–∫—Ç –Ω–∞ GitHub –∏ –æ—Ç–ø—Ä–∞–≤—å —Å—Å—ã–ª–∫—É –≤ OTUS –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç.
                </div>
                <div class="instructions">
                    <strong>–í–∞—Ä–∏–∞–Ω—Ç 2: ZIP –∞—Ä—Ö–∏–≤</strong><br>
                    –°–æ–∂–º–∏ –ø–∞–ø–∫—É <code>OTUS-CSharp-Basic-Homework</code> –∏ –∑–∞–≥—Ä—É–∑–∏ ZIP –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç OTUS.
                </div>
                <div class="alert success">
                    <strong>‚úÖ –£—Å–ø–µ—Ö!</strong> –¢–µ–ø–µ—Ä—å —É —Ç–µ–±—è –µ—Å—Ç—å –ø–æ–ª–Ω–∞—è –≥–æ—Ç–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É.
                </div>
            </div>
            
            <div class="button-group">
                <button class="btn btn-primary" onclick="alert('‚úÖ –í—Å–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∏ –∫–æ–¥—ã –≥–æ—Ç–æ–≤—ã! –ò—Å–ø–æ–ª—å–∑—É–π –∏—Ö –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –≤ Visual Studio.')">‚úÖ –Ø –≤—Å—ë –ø–æ–Ω—è–ª</button>
                <button class="btn btn-secondary" onclick="window.print()">üñ®Ô∏è –ü–µ—á–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏</button>
            </div>
        </div>
    </div>
    
    <script>
        function copyText(elementId) {
            const textarea = document.getElementById(elementId);
            textarea.select();
            document.execCommand('copy');
            
            const btn = event.target;
            const originalText = btn.textContent;
            btn.textContent = '‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!';
            setTimeout(() => {
                btn.textContent = originalText;
            }, 2000);
        }
        
        function copyCode(selector) {
            const code = document.querySelector(selector).textContent;
            navigator.clipboard.writeText(code).then(() => {
                alert('‚úÖ –ö–æ–¥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!');
            });
        }
    </script>
</body>
</html>
